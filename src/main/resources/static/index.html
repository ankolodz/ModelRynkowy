<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <title>Trafic Monitor</title>
    </head>
    <body onload="load()">
        <canvas id="canvas" width=1000px height=700px style="box-shadow: 1px 1px 10px black;"></canvas>

    </body>
    <script>
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');
    var radius = 5;

    function load() {
            $.get("/crossroads",function(data){
                for(i=0;i<data.length;i++){
                    addCrossroad(data[i])
                }
            })
            addCrossroad(100,100);
        }


    function addCrossroad(crossroad){
        ctx.beginPath();
        ctx.arc(crossroad.position.positionX,crossroad.position.positionY, radius, 0, 2 * Math.PI);
        ctx.fill(); 

        ctx.font = '12px serif';
        ctx.fillText(crossroad.id, crossroad.position.positionX, Math.abs(crossroad.position.positionY-20));
        
    }

    </script>
</html>